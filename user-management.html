<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management - Supply Chain Control Tower Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom styles for select dropdowns */
        select option {
            background-color: #1e293b !important;
            color: white !important;
        }
        
        select option:hover {
            background-color: #334155 !important;
        }
        
        select option:checked {
            background-color: #3b82f6 !important;
        }
        
        /* Ensure select text is always visible */
        select {
            color: white !important;
        }
        
        /* Custom select styling for better visibility */
        select:focus {
            background-color: rgba(255, 255, 255, 0.1) !important;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 min-h-screen text-white">
    <div class="relative z-10 flex h-screen">
        <!-- Sidebar Navigation -->
        <div class="w-64 bg-white/10 backdrop-blur-lg border-r border-white/20 flex flex-col">
            <!-- Logo and Title -->
            <div class="p-6 border-b border-white/20">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center">
                        <i class="fas fa-tower-broadcast text-xl text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold text-white">Supply Chain</h1>
                        <p class="text-xs text-gray-400">Control Tower</p>
                    </div>
                </div>
            </div>

            <!-- Navigation Menu -->
            <nav class="flex-1 p-4 space-y-2">
                <a href="dashboard.html" class="flex items-center space-x-3 px-4 py-3 text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all">
                    <i class="fas fa-home text-lg"></i>
                    <span class="font-medium">Home</span>
                </a>

                <div class="space-y-1">
                    <button class="w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all" onclick="toggleSubmenu('dashboard')">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-chart-line text-lg"></i>
                            <span class="font-medium">Dashboard</span>
                        </div>
                        <i class="fas fa-chevron-down text-sm transition-transform" id="dashboard-arrow"></i>
                    </button>
                    <div id="dashboard-submenu" class="hidden pl-8 space-y-1">
                        <a href="operations-dashboard.html" class="block px-4 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/10 rounded transition-all">
                            Operations Dashboard
                        </a>
                    </div>
                </div>

                <div class="space-y-1">
                    <button class="w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all" onclick="toggleSubmenu('reports')">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-file-alt text-lg"></i>
                            <span class="font-medium">Operations Report</span>
                        </div>
                        <i class="fas fa-chevron-down text-sm transition-transform" id="reports-arrow"></i>
                    </button>
                    <div id="reports-submenu" class="hidden pl-8 space-y-1">
                        <a href="ocean-booking-report.html" class="block px-4 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/10 rounded transition-all">
                            Ocean Booking Report
                        </a>
                        <a href="air-booking-report.html" class="block px-4 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/10 rounded transition-all">
                            Air Booking Report
                        </a>
                    </div>
                </div>

                <div class="space-y-1">
                    <button class="w-full flex items-center justify-between px-4 py-3 bg-blue-600/20 border border-blue-500/30 rounded-lg text-blue-300 transition-all" onclick="toggleSubmenu('system')">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-cog text-lg"></i>
                            <span class="font-medium">System</span>
                        </div>
                        <i class="fas fa-chevron-down text-sm transition-transform" id="system-arrow"></i>
                    </button>
                    <div id="system-submenu" class="pl-8 space-y-1">
                        <a href="user-management.html" class="block px-4 py-2 text-sm text-blue-300 bg-blue-600/20 rounded transition-all">
                            User Management
                        </a>
                    </div>
                </div>

                <div class="space-y-1">
                    <button class="w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all" onclick="toggleSubmenu('basic')">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-database text-lg"></i>
                            <span class="font-medium">Basic Data</span>
                        </div>
                        <i class="fas fa-chevron-down text-sm transition-transform" id="basic-arrow"></i>
                    </button>
                    <div id="basic-submenu" class="hidden pl-8 space-y-1">
                        <a href="timezone-management.html" class="block px-4 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/10 rounded transition-all">
                            Time Zone
                        </a>
                    </div>
                </div>
            </nav>

            <!-- User Profile -->
            <div class="p-4 border-t border-white/20">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white"></i>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-white">admin</p>
                        <p class="text-xs text-gray-400">Administrator</p>
                    </div>
                    <button onclick="logout()" class="px-3 py-1 bg-red-600/20 border border-red-500/30 text-red-300 rounded-lg hover:bg-red-600/30 transition-all text-sm">
                        Logout
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Top Header -->
            <header class="bg-white/10 backdrop-blur-lg border-b border-white/20 px-6 py-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-bold text-white">User Management</h2>
                        <p class="text-gray-400">Manage system users and permissions</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <!-- Header actions removed as requested -->
                    </div>
                </div>
            </header>

            <!-- Main Content -->
            <main class="flex-1 p-6 overflow-auto">


                <!-- Search and Actions Bar -->
                <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 mb-6">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0">
                        <!-- Search Section -->
                        <div class="flex-1 max-w-md">
                            <div class="relative">
                                <input type="text" id="searchInput" placeholder="Search users by IT Code, Name, or Email..." 
                                       class="w-full pl-10 pr-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="flex items-center space-x-3">
                            <button id="filterBtn" class="px-4 py-3 bg-white/10 border border-white/20 text-white font-medium rounded-lg hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-slate-900 transition-all duration-200">
                                <i class="fas fa-filter mr-2"></i>Filter
                            </button>
                            <button id="newUserBtn" class="px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white font-medium rounded-lg hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-slate-900 transition-all duration-200">
                                <i class="fas fa-plus mr-2"></i>New User
                            </button>
                        </div>
                    </div>

                    <!-- Filter Options (Hidden by default) -->
                    <div id="filterOptions" class="hidden mt-4 pt-4 border-t border-white/20">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Status</label>
                                <select class="w-full px-3 py-2 bg-white/5 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500" style="color: white;">
                                    <option value="" style="background-color: #1e293b; color: white;">All Status</option>
                                    <option value="active" style="background-color: #1e293b; color: white;">Active</option>
                                    <option value="inactive" style="background-color: #1e293b; color: white;">Inactive</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Role</label>
                                <select class="w-full px-3 py-2 bg-white/5 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500" style="color: white;">
                                    <option value="" style="background-color: #1e293b; color: white;">All Roles</option>
                                    <option value="admin" style="background-color: #1e293b; color: white;">Administrator</option>
                                    <option value="user" style="background-color: #1e293b; color: white;">General User</option>
                                </select>
                            </div>
                            <div class="flex items-end">
                                <button id="applyFilterBtn" class="w-full px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200">
                                    Apply Filters
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Users Table -->
                <div class="bg-white/10 backdrop-blur-lg rounded-2xl border border-white/20 overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-white/20">
                                <tr>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 tracking-wider">IT Code</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 tracking-wider">User Name</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 tracking-wider">Email</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 tracking-wider">Role</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 tracking-wider">Status</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 tracking-wider">Last Login</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody" class="divide-y divide-white/10">
                                <!-- Table rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    <div class="bg-white/20 px-4 py-3 flex items-center justify-between">
                        <div class="text-sm text-gray-300">
                            Showing <span id="startRecord">1</span> to <span id="endRecord">30</span> of <span id="totalRecords">60</span> users
                        </div>
                        <div class="flex items-center space-x-2">
                            <button id="prevPage" class="px-3 py-1 bg-white/10 border border-white/20 text-white rounded hover:bg-white/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <span class="px-3 py-1 text-white">
                                Page <span id="currentPage">1</span> of <span id="totalPages">2</span>
                            </span>
                            <button id="nextPage" class="px-3 py-1 bg-white/10 border border-white/20 text-white rounded hover:bg-white/20 transition-colors">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    

    <script>
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Expand system submenu
            document.getElementById('system-submenu').classList.remove('hidden');
            document.getElementById('system-arrow').style.transform = 'rotate(180deg)';
            
            // Load sample data
            loadSampleData();
            
            // Initialize event listeners
            initializeEventListeners();
        });

                 // Sample user data - 60 records for pagination demo (2 pages of 30 records each)
         const allUsers = [
             { itCode: 'ADM001', userName: 'John Smith', email: 'john.smith@company.com', role: 'Administrator', status: 'Active', lastLogin: '2024-12-15 14:30' },
             { itCode: 'USR002', userName: 'Sarah Johnson', email: 'sarah.j@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 13:45' },
             { itCode: 'USR003', userName: 'Mike Wilson', email: 'mike.wilson@company.com', role: 'General User', status: 'Inactive', lastLogin: '2024-12-10 09:15' },
             { itCode: 'ADM004', userName: 'Lisa Chen', email: 'lisa.chen@company.com', role: 'Administrator', status: 'Active', lastLogin: '2024-12-15 15:20' },
             { itCode: 'USR005', userName: 'David Brown', email: 'david.brown@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 11:30' },
             { itCode: 'USR006', userName: 'Emma Davis', email: 'emma.davis@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 10:45' },
             { itCode: 'USR007', userName: 'Tom Anderson', email: 'tom.anderson@company.com', role: 'General User', status: 'Inactive', lastLogin: '2024-12-08 16:20' },
             { itCode: 'ADM008', userName: 'Rachel Green', email: 'rachel.green@company.com', role: 'Administrator', status: 'Active', lastLogin: '2024-12-15 12:15' },
             { itCode: 'USR009', userName: 'Kevin Lee', email: 'kevin.lee@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 14:00' },
             { itCode: 'USR010', userName: 'Amanda White', email: 'amanda.white@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 13:30' },
             { itCode: 'USR011', userName: 'Alex Thompson', email: 'alex.thompson@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 16:45' },
             { itCode: 'USR012', userName: 'Maria Garcia', email: 'maria.garcia@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 14:20' },
             { itCode: 'ADM013', userName: 'James Wilson', email: 'james.wilson@company.com', role: 'Administrator', status: 'Active', lastLogin: '2024-12-15 17:30' },
             { itCode: 'USR014', userName: 'Sophie Martin', email: 'sophie.martin@company.com', role: 'General User', status: 'Inactive', lastLogin: '2024-12-09 11:15' },
             { itCode: 'USR015', userName: 'Daniel Lee', email: 'daniel.lee@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 15:45' },
             { itCode: 'USR016', userName: 'Olivia Taylor', email: 'olivia.taylor@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 13:20' },
             { itCode: 'USR017', userName: 'Ethan Brown', email: 'ethan.brown@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 16:10' },
             { itCode: 'ADM018', userName: 'Isabella Davis', email: 'isabella.davis@company.com', role: 'Administrator', status: 'Active', lastLogin: '2024-12-15 18:00' },
             { itCode: 'USR019', userName: 'Noah Johnson', email: 'noah.johnson@company.com', role: 'General User', status: 'Inactive', lastLogin: '2024-12-07 14:30' },
             { itCode: 'USR020', userName: 'Ava Miller', email: 'ava.miller@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 12:45' },
             { itCode: 'USR021', userName: 'Liam Anderson', email: 'liam.anderson@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 15:15' },
             { itCode: 'USR022', userName: 'Mia Clark', email: 'mia.clark@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 14:50' },
             { itCode: 'ADM023', userName: 'Lucas White', email: 'lucas.white@company.com', role: 'Administrator', status: 'Active', lastLogin: '2024-12-15 19:20' },
             { itCode: 'USR024', userName: 'Harper Lewis', email: 'harper.lewis@company.com', role: 'General User', status: 'Inactive', lastLogin: '2024-12-06 10:45' },
             { itCode: 'USR025', userName: 'Evelyn Hall', email: 'evelyn.hall@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 16:30' },
             { itCode: 'USR026', userName: 'Mason Young', email: 'mason.young@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 13:55' },
             { itCode: 'USR027', userName: 'Scarlett King', email: 'scarlett.king@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 17:45' },
             { itCode: 'ADM028', userName: 'Jack Wright', email: 'jack.wright@company.com', role: 'Administrator', status: 'Active', lastLogin: '2024-12-15 20:10' },
             { itCode: 'USR029', userName: 'Chloe Scott', email: 'chloe.scott@company.com', role: 'General User', status: 'Inactive', lastLogin: '2024-12-05 09:30' },
             { itCode: 'USR030', userName: 'Ryan Green', email: 'ryan.green@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 18:30' },
             // Page 2 users (31-60)
             { itCode: 'USR031', userName: 'Grace Turner', email: 'grace.turner@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 19:15' },
             { itCode: 'ADM032', userName: 'Henry Adams', email: 'henry.adams@company.com', role: 'Administrator', status: 'Active', lastLogin: '2024-12-15 20:45' },
             { itCode: 'USR033', userName: 'Zoe Campbell', email: 'zoe.campbell@company.com', role: 'General User', status: 'Inactive', lastLogin: '2024-12-04 08:20' },
             { itCode: 'USR034', userName: 'Leo Mitchell', email: 'leo.mitchell@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 21:30' },
             { itCode: 'USR035', userName: 'Nora Parker', email: 'nora.parker@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-15 22:15' },
             { itCode: 'ADM036', userName: 'Caleb Evans', email: 'caleb.evans@company.com', role: 'Administrator', status: 'Active', lastLogin: '2024-12-15 23:00' },
             { itCode: 'USR037', userName: 'Luna Roberts', email: 'luna.roberts@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 00:30' },
             { itCode: 'USR038', userName: 'Owen Phillips', email: 'owen.phillips@company.com', role: 'General User', status: 'Inactive', lastLogin: '2024-12-03 11:45' },
             { itCode: 'USR039', userName: 'Stella Carter', email: 'stella.carter@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 01:15' },
             { itCode: 'USR040', userName: 'Sebastian Torres', email: 'sebastian.torres@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 02:00' },
             { itCode: 'ADM041', userName: 'Victoria Morgan', email: 'victoria.morgan@company.com', role: 'Administrator', status: 'Active', lastLogin: '2024-12-16 02:45' },
             { itCode: 'USR042', userName: 'Gabriel Cooper', email: 'gabriel.cooper@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 03:30' },
             { itCode: 'USR043', userName: 'Penelope Richardson', email: 'penelope.richardson@company.com', role: 'General User', status: 'Inactive', lastLogin: '2024-12-02 14:20' },
             { itCode: 'USR044', userName: 'Isaac Cox', email: 'isaac.cox@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 04:15' },
             { itCode: 'USR045', userName: 'Hazel Ward', email: 'hazel.ward@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 05:00' },
             { itCode: 'ADM046', userName: 'Nathan Hughes', email: 'nathan.hughes@company.com', role: 'Administrator', status: 'Active', lastLogin: '2024-12-16 05:45' },
             { itCode: 'USR047', userName: 'Aurora Foster', email: 'aurora.foster@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 06:30' },
             { itCode: 'USR048', userName: 'Xavier Simmons', email: 'xavier.simmons@company.com', role: 'General User', status: 'Inactive', lastLogin: '2024-12-01 16:15' },
             { itCode: 'USR049', userName: 'Violet Butler', email: 'violet.butler@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 07:15' },
             { itCode: 'USR050', userName: 'Adrian Russell', email: 'adrian.russell@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 08:00' },
             { itCode: 'ADM051', userName: 'Scarlet Griffin', email: 'scarlet.griffin@company.com', role: 'Administrator', status: 'Active', lastLogin: '2024-12-16 08:45' },
             { itCode: 'USR052', userName: 'Felix Diaz', email: 'felix.diaz@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 09:30' },
             { itCode: 'USR053', userName: 'Iris Hayes', email: 'iris.hayes@company.com', role: 'General User', status: 'Inactive', lastLogin: '2024-11-30 10:30' },
             { itCode: 'USR054', userName: 'Theo Price', email: 'theo.price@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 10:15' },
             { itCode: 'USR055', userName: 'Ruby Bennett', email: 'ruby.bennett@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 11:00' },
             { itCode: 'ADM056', userName: 'Miles Wood', email: 'miles.wood@company.com', role: 'Administrator', status: 'Active', lastLogin: '2024-12-16 11:45' },
             { itCode: 'USR057', userName: 'Lily Barnes', email: 'lily.barnes@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 12:30' },
             { itCode: 'USR058', userName: 'Kai Ross', email: 'kai.ross@company.com', role: 'General User', status: 'Inactive', lastLogin: '2024-11-29 12:45' },
             { itCode: 'USR059', userName: 'Nova Henderson', email: 'nova.henderson@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 13:15' },
             { itCode: 'USR060', userName: 'Atlas Coleman', email: 'atlas.coleman@company.com', role: 'General User', status: 'Active', lastLogin: '2024-12-16 14:00' }
         ];
         
         let currentPage = 1;
         const usersPerPage = 30;
         let filteredUsers = [...allUsers];
         
         // Load sample data with pagination
         function loadSampleData() {
             updateTable();
             updatePagination();
         }
         
         // Update table with current page data
         function updateTable() {
             const tbody = document.getElementById('usersTableBody');
             tbody.innerHTML = '';
             
             const startIndex = (currentPage - 1) * usersPerPage;
             const endIndex = startIndex + usersPerPage;
             const currentPageUsers = filteredUsers.slice(startIndex, endIndex);
             
             currentPageUsers.forEach(user => {
                 const tr = document.createElement('tr');
                 tr.className = 'hover:bg-white/5 transition-colors';
                 tr.innerHTML = `
                     <td class="px-4 py-3 text-sm text-white font-medium">${user.itCode}</td>
                     <td class="px-4 py-3 text-sm text-gray-300">${user.userName}</td>
                     <td class="px-4 py-3 text-sm text-gray-300">${user.email}</td>
                     <td class="px-4 py-3 text-sm">
                         <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${user.role === 'Administrator' ? 'bg-purple-100 text-purple-800' : 'bg-blue-100 text-blue-800'}">
                             ${user.role}
                         </span>
                     </td>
                     <td class="px-4 py-3 text-sm">
                         <span class="text-xs font-medium ${user.status === 'Active' ? 'text-green-400' : 'text-red-400'}">
                             ${user.status}
                         </span>
                     </td>
                     <td class="px-4 py-3 text-sm text-gray-300">${user.lastLogin}</td>
                     <td class="px-4 py-3 text-sm">
                         <div class="flex items-center space-x-2">
                             <button onclick="viewUser('${user.itCode}')" class="text-blue-400 hover:text-blue-300 transition-colors" title="View Details">
                                 <i class="fas fa-eye"></i>
                             </button>
                             <button onclick="editUser('${user.itCode}')" class="text-yellow-400 hover:text-yellow-300 transition-colors" title="Edit User">
                                 <i class="fas fa-edit"></i>
                             </button>
                             <button onclick="resetPassword('${user.itCode}')" class="text-green-400 hover:text-green-300 transition-colors" title="Reset Password">
                                 <i class="fas fa-key"></i>
                             </button>
                         </div>
                     </td>
                 `;
                 tbody.appendChild(tr);
             });
         }
         
         // Update pagination information
         function updatePagination() {
             const totalUsers = filteredUsers.length;
             const totalPages = Math.ceil(totalUsers / usersPerPage);
             const startRecord = (currentPage - 1) * usersPerPage + 1;
             const endRecord = Math.min(currentPage * usersPerPage, totalUsers);
             
             // Update pagination text
             document.getElementById('startRecord').textContent = startRecord;
             document.getElementById('endRecord').textContent = endRecord;
             document.getElementById('totalRecords').textContent = totalUsers;
             document.getElementById('currentPage').textContent = currentPage;
             document.getElementById('totalPages').textContent = totalPages;
             
             // Update pagination buttons
             const prevBtn = document.getElementById('prevPage');
             const nextBtn = document.getElementById('nextPage');
             
             prevBtn.disabled = currentPage === 1;
             nextBtn.disabled = currentPage === totalPages;
             
             // Update button styles
             if (currentPage === 1) {
                 prevBtn.classList.add('opacity-50', 'cursor-not-allowed');
             } else {
                 prevBtn.classList.remove('opacity-50', 'cursor-not-allowed');
             }
             
             if (currentPage === totalPages) {
                 nextBtn.classList.add('opacity-50', 'cursor-not-allowed');
             } else {
                 nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
             }
         }

                 // Initialize event listeners
         function initializeEventListeners() {
             // Filter toggle
             document.getElementById('filterBtn').addEventListener('click', function() {
                 const filterOptions = document.getElementById('filterOptions');
                 filterOptions.classList.toggle('hidden');
             });
 
             // New user button
             document.getElementById('newUserBtn').addEventListener('click', function() {
                 window.location.href = 'user-detail.html?mode=new';
             });
 
             // Search functionality
             document.getElementById('searchInput').addEventListener('input', function() {
                 const searchTerm = this.value.toLowerCase();
                 
                 if (searchTerm === '') {
                     filteredUsers = [...allUsers];
                 } else {
                     filteredUsers = allUsers.filter(user => 
                         user.itCode.toLowerCase().includes(searchTerm) ||
                         user.userName.toLowerCase().includes(searchTerm) ||
                         user.email.toLowerCase().includes(searchTerm)
                     );
                 }
                 
                 currentPage = 1; // Reset to first page when searching
                 updateTable();
                 updatePagination();
             });
             
             // Pagination navigation
             document.getElementById('prevPage').addEventListener('click', function() {
                 if (currentPage > 1) {
                     currentPage--;
                     updateTable();
                     updatePagination();
                 }
             });
             
             document.getElementById('nextPage').addEventListener('click', function() {
                 const totalPages = Math.ceil(filteredUsers.length / usersPerPage);
                 if (currentPage < totalPages) {
                     currentPage++;
                     updateTable();
                     updatePagination();
                 }
             });
             
             // Filter functionality
             document.getElementById('applyFilterBtn').addEventListener('click', function() {
                 const statusSelect = document.querySelector('#filterOptions select:first-of-type');
                 const roleSelect = document.querySelector('#filterOptions select:last-of-type');
                 const statusFilter = statusSelect.value;
                 const roleFilter = roleSelect.value;
                 
                 filteredUsers = allUsers.filter(user => {
                     const statusMatch = statusFilter === '' || user.status.toLowerCase() === statusFilter;
                     const roleMatch = roleFilter === '' || user.role.toLowerCase() === roleFilter;
                     return statusMatch && roleMatch;
                 });
                 
                 currentPage = 1; // Reset to first page when filtering
                 updateTable();
                 updatePagination();
             });
         }

        // Submenu toggle functionality
        function toggleSubmenu(menuId) {
            const submenu = document.getElementById(menuId + '-submenu');
            const arrow = document.getElementById(menuId + '-arrow');
            
            if (submenu.classList.contains('hidden')) {
                submenu.classList.remove('hidden');
                arrow.style.transform = 'rotate(180deg)';
            } else {
                submenu.classList.add('hidden');
                arrow.style.transform = 'rotate(0deg)';
            }
        }

        // User action functions
        function viewUser(itCode) {
            window.location.href = `user-detail.html?mode=view&itCode=${itCode}`;
        }

        function editUser(itCode) {
            window.location.href = `user-detail.html?mode=edit&itCode=${itCode}`;
        }

        function resetPassword(itCode) {
            // This will be handled in the user detail page
            window.location.href = `user-detail.html?mode=edit&itCode=${itCode}&action=reset`;
        }

        // Logout function
        function logout() {
            window.location.href = 'login.html';
        }
    </script>
</body>
</html>

